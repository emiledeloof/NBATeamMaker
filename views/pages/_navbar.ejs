<nav>
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/pages/dashboard">Dashboard</a></li>
        <li><a href="/pages/teams/show">My teams</a></li>
        <li><a href="/pages/leagues/create">Create league</a></li>
        <li><a href="/pages/leagues">View all leagues</a></li>
        <li>
            <span id="usernameWrapper"><%= username %></>
            <ul id="profileUl" class="hidden">
                <li><a href="/pages/profile" id="profileLink" style="display: flex;"><img src="/user-solid.svg" width="20px"> <span>Profile</span></a></li>
                <li>
                    <form action="/pages/sign-out" method="POST">
                        <button id="signOutButton" style="display: flex;"><img src="/signOut.svg" width="20px"><span> Sign out</span></button>
                    </form>
                </li>
            </ul>
        </li>
        <li>
            <span id="notificationButton">
                Notifications
                <% if(hasNotifications == true){ %>
                    <span id="dot"></span>
                <% } %>
            </span>
            <div id="notificationWrapper" class="hidden">
                <% if(notifications.length !== 0){ %>
                    <% notifications.forEach(notification => { %>
                        <div class="notification">
                            <% if(notification.type == 1){ %>
                                Friend request from: 
                                <%= notification.data.username %>
                                <form action="/pages/friends/<%= notification.data.id %>/accept?fromNotif=true" method="POST"><button>Accept</button></form>
                                <form action="/pages/friends/<%= notification.data.id %>/reject?fromNotif=true" method="POST"><button>Reject</button></form>
                            <% } %>
                        </div>
                    <% }) %>
                <% } else { %>
                    <span id="noNotif">Seems pretty empty in here...</span>
                <% } %>
            </div>
        </li>
    </ul>
</nav>
<script>
    document.addEventListener("click", (e) => {
        if(document.getElementById("notificationWrapper").classList.contains("visible")){
            if(e.target.id != "notificationButton" || e.target.id != "notificationWrapper"){
                
            }
        }
    })
    document.getElementById("usernameWrapper").addEventListener("click", (event) => {
        document.getElementById("profileUl").classList.toggle("visible")
        document.getElementById("profileUl").classList.toggle("hidden")
    })
    document.getElementById("notificationButton").addEventListener("click", (event) => {
        document.getElementById("notificationWrapper").classList.toggle("visible")
        document.getElementById("notificationWrapper").classList.toggle("hidden")
    })
</script>